<phyphox version="1.19" locale="en">
  <title>Camera Spectrum: Brightness</title>
  <category>Tools</category>
  <icon format="base64">
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
  </icon>
  <description>
            Display the frequency spectrum of changing brightness from the camera.

This experiment measures the brightness in the selected area of the camera image and claculates the frequency spectrum of brightness fluctuations. Note that the maximum frequency of this spectrum is determined by the capabilities of your camera. The resolution of the spectrum can be changed by taking into account more data points (see settings), which results in slower reaction to changes as a trade-off.

If you are using auto exposure, be aware that the average brightness will drift towards 0.5 within a short time. This may allow reliable triggering in changing light conditions, but it may also impact the precision of the triggers and especially measured durations. Also note, that this stopwatch uses luma instead of luminance, i.e. a non-linear representation of brightness, which can be calculated faster. This means that the value will not be comparable to the luminance measurements and that it is influenced by changing exposure settings.
    </description>
  <data-containers>
    <container size="4096">lumaIn</container>
    <container size="4096">luma</container>
    <container size="4096">time</container>
    <container size="4096">luma_subrange</container>
    <container size="4096">time_subrange</container>
    <container size="1">recording_length</container>
    <container size="1">subrange_start</container>
    <container init="256">samples</container>
    <container size="1">actual_samples</container>
    <container size="1">actual_samples+1</container>
    <container size="1">period</container>
    <container size="1">count-1</container>
    <container size="1">count+1</container>
    <container size="1">count/2</container>
    <container size="1">count</container>
    <container size="1">t0</container>
    <container size="1">t1</container>
    <container size="1">Dt</container>
    <container size="1">dt</container>
    <container size="1">maxf</container>
    <container size="1">df</container>
    <container size="1">arate</container>
    <container size="4096">frequency</container>
    <container size="4096">fftX</container>
    <container size="4096">fftY</container>
    <container size="2048">halfFrequency</container>
    <container size="2048">halfFFTtempX</container>
    <container size="2048">halfFFTtempY</container>
    <container size="2048">halfFFTtempX2</container>
    <container size="2048">halfFFTtempY2</container>
    <container size="2048">fft</container>
    <container size="0">f0</container>
    <container size="0">t</container>
    <container size="1">resolutionRatio</container>
    <container size="256">timeline</container>
    <container size="256">reducedf</container>
    <container size="256">reducedfft</container>
    <container size="1">firstfft</container>
    <container size="256">subf</container>
    <container size="256">subfft</container>
    <container size="32768">tmap</container>
    <container size="32768">fmap</container>
    <container size="32768">fftmap</container>
  </data-containers>
  <input>
    <camera auto_exposure="true" feature="photometric" x1="0.4" x2="0.6" y1="0.4" y2="0.6" aeStrategy="prioritizeFramerate">
      <output component="luma">lumaIn</output>
      <output component="t">time</output>
    </camera>
  </input>
  <views>
    <view label="Spectrum">
      <value label="Peak-Frequency" unit="[[unit_short_hertz]]">
        <input>f0</input>
      </value>
      <value label="Peak-Frequency" factor="60" unit="1/min">
        <input>f0</input>
      </value>
      <separator height="1"/>
      <graph label="Fourier Transform" logX="false" logY="true" labelX="Frequency" unitX="[[unit_short_hertz]]" labelY="FFT Mag" unitY="[[unit_short_arbitrary_unit]]">
        <input axis="x">halfFrequency</input>
        <input axis="y">fft</input>
      </graph>
      <separator height="1"/>
      <value label="Samples used">
        <input>actual_samples</input>
      </value>
      <value label="Period used" unit="[[unit_short_second]]" precision="2">
        <input>period</input>
      </value>
      <value label="Resolution" unit="[[unit_short_hertz]]" precision="2">
        <input>df</input>
      </value>
      <value label="Acquisition rate" unit="[[unit_short_hertz]]" precision="0">
        <input>arate</input>
      </value>
      <value label="Nyquist frequency" unit="[[unit_short_hertz]]" precision="0">
        <input>maxf</input>
      </value>
      <separator height="1"/>
      <camera-gui label="Preview" exposure_adjustment_level="3" />
    </view>
    <view label="History">
      <graph label="Fourier Transform" logZ="true" labelX="Frequency" unitX="[[unit_short_hertz]]" labelY="Time" unitY="[[unit_short_second]]" labelZ="FFT Mag" unitZ="[[unit_short_arbitrary_unit]]" aspectRatio="1" style="map" mapWidth="256" partialUpdate="true">
        <input axis="x">fmap</input>
        <input axis="y">tmap</input>
        <input axis="z">fftmap</input>
      </graph>
      <graph label="History" labelX="Time" unitX="[[unit_short_second]]" labelY="Peak-Frequency" unitY="[[unit_short_hertz]]" partialUpdate="true" style="dots">
        <input axis="x">t</input>
        <input axis="y">f0</input>
      </graph>
    </view>
    <view label="Settings">
      <info label="Below you can set the number of samples used for the Fourier transform. More samples means slower updates, but higher spectral resolution."/>
      <value label="Samples" precision="0">
        <input>samples</input>
      </value>
      <separator height="0.5"/>
      <button label="128">
        <input type="value">128</input>
        <output>samples</output>
      </button>
      <button label="256">
        <input type="value">256</input>
        <output>samples</output>
      </button>
      <button label="512">
        <input type="value">512</input>
        <output>samples</output>
      </button>
      <button label="1024">
        <input type="value">1024</input>
        <output>samples</output>
      </button>
      <button label="2048">
        <input type="value">2048</input>
        <output>samples</output>
      </button>
      <button label="4096">
        <input type="value">4096</input>
        <output>samples</output>
      </button>
    </view>
    <view label="Raw data">
      <graph label="Luma" labelX="[[quantity_short_time]]" unitX="[[unit_short_second]]" labelY="Luminance" unitY="a.u." partialUpdate="true">
        <input axis="x">time_subrange</input>
        <input axis="y">luma_subrange</input>
      </graph>
    </view>
  </views>
  <analysis sleep="0.1">
    <timer>
      <output clear="false">t</output>
    </timer>
    <const>
      <input as="value" clear="false">t</input>
      <input as="length" type="value">256</input>
      <output>timeline</output>
    </const>
    <append>
      <input>lumaIn</input>
      <output clear="false">luma</output>
    </append>
    <count>
      <input clear="false">luma</input>
      <output>count</output>
    </count>
    <subtract>
      <input clear="false">count</input>
      <input type="value">1</input>
      <output>count-1</output>
    </subtract>
    <first>
      <input clear="false">time</input>
      <output>t0</output>
    </first>
    <subrange>
      <input as="from" clear="false">count-1</input>
      <input as="length" type="value">1</input>
      <input as="in" clear="false">time</input>
      <output>t1</output>
    </subrange>
    <subtract>
      <input clear="false">t1</input>
      <input clear="false">t0</input>
      <output>Dt</output>
    </subtract>
    <divide>
      <input clear="false">Dt</input>
      <input clear="false">count-1</input>
      <output>dt</output>
    </divide>
    <count>
      <input clear="false">luma</input>
      <output>recording_length</output>
    </count>
    <subtract>
      <input>recording_length</input>
      <input clear="false">samples</input>
      <output>subrange_start</output>
    </subtract>
    <subrange>
      <input clear="false" as="from">subrange_start</input>
      <input as="in" clear="false">luma</input>
      <output>luma_subrange</output>
    </subrange>
    <subrange>
      <input clear="false" as="from">subrange_start</input>
      <input as="in" clear="false">time</input>
      <output>time_subrange</output>
    </subrange>
    <count>
      <input clear="false">luma_subrange</input>
      <output>actual_samples</output>
    </count>
    <add>
      <input clear="false">actual_samples</input>
      <input type="value">1</input>
      <output>actual_samples+1</output>
    </add>
    <multiply>
      <input clear="false">actual_samples</input>
      <input clear="false">dt</input>
      <output>period</output>
    </multiply>
    <divide>
      <input type="value">1</input>
      <input clear="false">period</input>
      <output>df</output>
    </divide>
    <fft>
      <input clear="false">luma_subrange</input>
      <output as="re">fftX</output>
      <output as="im">fftY</output>
    </fft>
    <count>
      <input clear="false">luma</input>
      <output>count</output>
    </count>
    <divide>
      <input clear="false">actual_samples</input>
      <input type="value">2</input>
      <output>count/2</output>
    </divide>
    <divide>
      <input type="value">0.5</input>
      <input clear="false">dt</input>
      <output>maxf</output>
    </divide>
    <divide>
      <input type="value">1</input>
      <input clear="false">dt</input>
      <output>arate</output>
    </divide>
    <ramp>
      <input as="start" type="value">0</input>
      <input as="stop" clear="false">arate</input>
      <input as="length" clear="false">actual_samples+1</input>
      <output>frequency</output>
    </ramp>
    <subrange>
      <input as="from" type="value">1</input>
      <input as="to" clear="false">count/2</input>
      <input as="in" clear="false">frequency</input>
      <input as="in">fftX</input>
      <input as="in">fftY</input>
      <output>halfFrequency</output>
      <output>halfFFTtempX</output>
      <output>halfFFTtempY</output>
    </subrange>
    <multiply>
      <input clear="false">halfFFTtempX</input>
      <input>halfFFTtempX</input>
      <output>halfFFTtempX2</output>
    </multiply>
    <multiply>
      <input clear="false">halfFFTtempY</input>
      <input>halfFFTtempY</input>
      <output>halfFFTtempY2</output>
    </multiply>
    <add>
      <input>halfFFTtempX2</input>
      <input>halfFFTtempY2</input>
      <output>fft</output>
    </add>
    <max>
      <input as="y" clear="false">fft</input>
      <input as="x" clear="false">halfFrequency</input>
      <output as="position" clear="false">f0</output>
    </max>
    <divide>
      <input clear="false">actual_samples</input>
      <input type="value">512</input>
      <output>resolutionRatio</output>
    </divide>
    <reduce averageY="true" averageX="false">
      <input clear="false" as="factor">resolutionRatio</input>
      <input clear="false" as="x">halfFrequency</input>
      <input clear="false" as="y">fft</input>
      <output as="x" clear="true">reducedf</output>
      <output as="y" clear="true">reducedfft</output>
    </reduce>
    <const>
      <output>subf</output>
    </const>
    <first>
      <input clear="false">reducedfft</input>
      <output>firstfft</output>
    </first>
    <const>
      <input as="value">firstfft</input>
      <output>subfft</output>
    </const>
    <subrange>
      <input as="from" type="value">0</input>
      <input as="to" type="value">256</input>
      <input as="in">reducedf</input>
      <input as="in">reducedfft</input>
      <output clear="false">subf</output>
      <output clear="false">subfft</output>
    </subrange>
    <append>
      <input clear="false">timeline</input>
      <output clear="false">tmap</output>
    </append>
    <append>
      <input clear="false">subf</input>
      <output clear="false">fmap</output>
    </append>
    <append>
      <input clear="false">subfft</input>
      <output clear="false">fftmap</output>
    </append>
  </analysis>
  <export>
    <set name="FFT Spectrum">
      <data name="Frequency (Hz)">halfFrequency</data>
      <data name="Absolute Amplitude (a.u.)">fft</data>
    </set>
    <set name="Peak History">
      <data name="Time (s)">t</data>
      <data name="Peak-Frequency">f0</data>
    </set>
    <set name="Raw data">
      <data name="Time (s)">time_subrange</data>
      <data name="Luma">luma_subrange</data>
    </set>
  </export>
</phyphox>
